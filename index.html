<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Push To Other Repo - GitHub Action</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
  body {
    font-family: Arial, sans-serif;
    background: #f7f9fc;
    margin: 0;
    padding: 0;
    line-height: 1.6;
    color: #333;
  }
  header {
    background: #0366d6;
    color: #fff;
    padding: 20px 25px;
  }
  header h1 {
    margin: 0;
    font-size: 28px;
  }
  .container {
    max-width: 900px;
    margin: 30px auto;
    background: #fff;
    padding: 25px 30px;
    border-radius: 10px;
    box-shadow: 0 2px 12px rgba(0,0,0,0.08);
  }
  h2 {
    border-left: 4px solid #0366d6;
    padding-left: 10px;
    margin-top: 40px;
  }
  pre, code {
    background: #f0f4f8;
    padding: 10px;
    border-radius: 6px;
    overflow-x: auto;
    display: block;
    border: 1px solid #e2e8f0;
  }
  .sidebar {
    margin-top: 40px;
    padding: 20px;
    border-radius: 10px;
    background: #f5f7fa;
    border: 1px solid #e1e5ea;
  }
  .sidebar-section {
    margin-bottom: 20px;
  }
  .sidebar-section strong {
    font-size: 16px;
  }
  .meta {
    font-size: 14px;
    color: #444;
  }
  a.link {
    color: #0366d6;
    text-decoration: none;
  }
  a.link:hover {
    text-decoration: underline;
  }
</style>
</head>

<body>

<header>
  <h1>Push To Other Repo – GitHub Action</h1>
  <p>Securely sync files or folders from one repository to another without force pushes.</p>
</header>

<div class="container">

  <h2>Overview</h2>
  <p>
    This GitHub Action syncs a directory from the current repository into another GitHub repository and branch.
    It safely clones the destination repo, syncs only the selected folder, commits changes, and pushes without
    using force pushes.
  </p>

  <h2>Inputs</h2>

  <table border="1" cellpadding="8" cellspacing="0" width="100%" style="border-collapse: collapse;">
    <tr><th>Name</th><th>Required</th><th>Description</th></tr>
    <tr><td>source_directory</td><td>Yes</td><td>The folder inside the current repo to sync.</td></tr>
    <tr><td>destination_repository</td><td>Yes</td><td>Target repo in <code>owner/repo</code> format.</td></tr>
    <tr><td>target_branch</td><td>Yes</td><td>Branch that will receive updates.</td></tr>
    <tr><td>user_email</td><td>Yes</td><td>Email used for the commit.</td></tr>
    <tr><td>user_name</td><td>Yes</td><td>Name used for the commit.</td></tr>
    <tr><td>api_token</td><td>Yes</td><td>GitHub PAT with push permissions.</td></tr>
  </table>

  <h2>Example Usage</h2>

<pre><code>name: Sync files

on:
  push:
    branches: ["main"]

jobs:
  sync:
    runs-on: ubuntu-latest
    
    steps:
      - uses: actions/checkout@v4
      
      - name: Push folder to another repository
        uses: dprakash2101/push-to-other-repo@latest
        with:
          source_directory: "dist"
          destination_repository: "your-org/your-repo"
          target_branch: "main"
          user_email: "automation@example.com"
          user_name: "Sync Bot"
          api_token: ${{ secrets.REPO_PUSH_TOKEN }}
</code></pre>

  <h2>How It Works</h2>
  <ol>
    <li>Validates required inputs</li>
    <li>Clones destination repository</li>
    <li>Checks out the target branch (or creates it)</li>
    <li>Syncs selected directory using <code>rsync</code></li>
    <li>Commits only if changes exist</li>
    <li>Attempts fast-forward push</li>
    <li>If blocked, performs safe pull + rebase</li>
  </ol>

  <h2>Token Requirements</h2>

<pre><code>repo
</code></pre>

  <p>A PAT with <code>repo</code> or <code>contents: write</code> permissions is required.</p>

  <div class="sidebar">

    <aside>
      <div class="card">

        <div class="sidebar-section">
          <strong>Author</strong>
          <div class="meta" style="margin-top:8px">
            <a class="link" href="https://github.com/dprakash2101" target="_blank" rel="noopener">
              Devi Prakash
            </a>
          </div>
        </div>

        <div class="sidebar-section">
          <strong>License</strong>
          <div class="meta" style="margin-top:8px">
            MIT — see 
            <a class="link"
               href="https://github.com/dprakash2101/push-to-other-repo/blob/main/LICENSE"
               target="_blank" rel="noopener">
              LICENSE
            </a>
          </div>
        </div>

      </div>
    </aside>

  </div>

</div>

</body>
</html>
